<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading Screen Demo</title>
    <!-- Three.js and Vanta.js libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.fog.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        /* Load Inter font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        /* Vanta.js background container */
        #vanta-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Loading content centered on background */
        .loading-content {
            text-align: center;
            width: 90%;
            max-width: 500px;
            z-index: 2;
            position: relative;
        }

        /* Game title */
        .game-title {
            color: #ffcc8a;
            font-size: 2.2rem;
            margin-bottom: 5px;
            font-weight: 600;
            letter-spacing: 1px;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
        }

        .game-subtitle {
            color: rgba(255, 204, 138, 0.7);
            font-size: 1rem;
            margin-bottom: 50px;
            font-weight: 400;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        /* Status text */
        .status {
            color: #f2b55e;
            font-size: 1.1rem;
            margin-bottom: 40px;
            font-weight: 500;
            height: 24px;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
        }

        /* Loading bar - continuous sliding effect */
        .loading-bar-container {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin: 40px 0 30px;
            overflow: hidden;
            position: relative;
        }

        /* The moving white shine that slides continuously */
        .loading-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 30%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent,
                rgba(255, 173, 87, 0.8),
                rgba(255, 173, 87, 0.8),
                transparent);
            animation: slide 1.5s infinite ease-in-out;
        }

        @keyframes slide {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(400%); }
        }

        /* Percentage display */
        .percentage {
            color: #ffcc8a;
            font-size: 1.2rem;
            font-weight: 600;
            margin-top: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Quote section - clean and simple */
        .quote-container {
            margin: 60px 0 0;
            padding: 25px 0 0;
            position: relative;
        }

        /* Divider line above quote */
        .quote-container:before {
            content: '';
            position: absolute;
            top: 0;
            left: 20%;
            right: 20%;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 179, 71, 0.3), 
                transparent);
        }

        .quote-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            line-height: 1.5;
            font-style: italic;
            font-weight: 300;
            padding: 0 20px;
        }

        /* Fade out animation */
        .fade-out {
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <!-- Vanta.js Background -->
        <div id="vanta-bg"></div>
        
        <!-- Content directly on background -->
        <div class="loading-content">
            <div class="game-title" id="gameTitle">HALF-LIFE</div>
            <div class="game-subtitle" id="gameSubtitle">OPPOSING FORCE</div>
            
            <div class="status" id="statusText">Initializing game engine...</div>
            
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
            </div>
            
            <div class="percentage" id="percentage">0%</div>
            
            <div class="quote-container">
                <div class="quote-text" id="quoteText">Prepare for unforeseen consequences</div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            quotes: [
                "The right man in the wrong place can make all the difference in the world.",
                "Prepare for unforeseen consequences.",
                "Rise and shine, Mister Freeman. Rise and shine.",
                "Warning. High levels of background radiation detected.",
                "Primary objective: Survive",
                "We have hostiles inbound",
                "Black Mesa can handle the situation",
                "Authorization code is required",
                "Containment breach detected",
                "Specimen is loose"
            ],
            loadingSteps: [
                { status: "Initializing game engine...", progress: 15 },
                { status: "Loading core assets...", progress: 30 },
                { status: "Compiling shaders...", progress: 45 },
                { status: "Loading textures & models...", progress: 60 },
                { status: "Establishing connection...", progress: 75 },
                { status: "Optimizing performance...", progress: 85 },
                { status: "Finalizing...", progress: 95 },
                { status: "Ready to launch...", progress: 100 }
            ],
            vantaSettings: {
                el: "#vanta-bg",
                mouseControls: true,
                touchControls: true,
                gyroControls: false,
                minHeight: 200.00,
                minWidth: 200.00,
                highlightColor: 0xffab00,
                midtoneColor: 0xb16f3b,
                lowlightColor: 0x93623e,
                baseColor: 0x3c291b,
                speed: 2.50,
                zoom: 1.80
            }
        };

        // App State
        const state = {
            currentStep: 0,
            currentGame: "Half-Life: Opposing Force",
            vantaEffect: null,
            quoteInterval: null
        };

        // Initialize Vanta.js fog background
        function initVantaBackground() {
            if (window.VANTA && !state.vantaEffect) {
                state.vantaEffect = VANTA.FOG(CONFIG.vantaSettings);
            }
        }

        // Get random quote
        function getRandomQuote() {
            return CONFIG.quotes[Math.floor(Math.random() * CONFIG.quotes.length)];
        }

        // Update quote display
        function updateQuote() {
            document.getElementById('quoteText').textContent = getRandomQuote();
        }

        // Update loading progress (just percentage and status)
        function updateProgress() {
            if (state.currentStep >= CONFIG.loadingSteps.length) return;
            
            const step = CONFIG.loadingSteps[state.currentStep];
            const percentageEl = document.getElementById('percentage');
            const statusEl = document.getElementById('statusText');
            
            // Update status
            statusEl.textContent = step.status;
            
            // Update percentage
            percentageEl.textContent = step.progress + '%';
            
            state.currentStep++;
            
            // If not done, schedule next update
            if (state.currentStep < CONFIG.loadingSteps.length) {
                const delay = step.progress === 100 ? 1000 : 800 + Math.random() * 400;
                setTimeout(updateProgress, delay);
            }
        }

        // Hide loading screen
        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            loadingScreen.classList.add('fade-out');
            
            // Clear intervals
            if (state.quoteInterval) {
                clearInterval(state.quoteInterval);
            }
            
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                
                // Clean up Vanta.js
                if (state.vantaEffect) {
                    state.vantaEffect.destroy();
                    state.vantaEffect = null;
                }
                
                // Game would start here
                console.log(`Game "${state.currentGame}" loaded successfully!`);
                alert(`Game "${state.currentGame}" is now ready! (Demo complete)`);
            }, 500);
        }

        // Start loading simulation
        function startLoadingSimulation(gameTitle) {
            // Set game title
            state.currentGame = gameTitle;
            const parts = gameTitle.split(':');
            document.getElementById('gameTitle').textContent = parts[0]?.trim().toUpperCase() || gameTitle.toUpperCase();
            document.getElementById('gameSubtitle').textContent = parts[1]?.trim().toUpperCase() || '';
            
            // Initialize Vanta background
            initVantaBackground();
            
            // Start with initial quote
            updateQuote();
            state.currentStep = 0;
            
            // Start quote rotation every 4 seconds
            state.quoteInterval = setInterval(updateQuote, 4000);
            
            // Start progress simulation
            setTimeout(() => {
                updateProgress();
                
                // Simulate game loading complete after all steps
                setTimeout(() => {
                    hideLoadingScreen();
                }, 9000);
            }, 800);
        }

        // Handle window resize
        function handleResize() {
            if (state.vantaEffect) {
                state.vantaEffect.resize();
            }
        }

        // Initialize demo
        function initDemo() {
            // Start demo after a brief delay
            setTimeout(() => {
                startLoadingSimulation("Half-Life: Opposing Force");
            }, 800);
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', initDemo);
        window.addEventListener('resize', handleResize);

        // Simplified version for iframe integration
        window.createLoadingScreen = function(gameTitle) {
            const initialQuote = CONFIG.quotes[Math.floor(Math.random() * CONFIG.quotes.length)];
            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Loading ${gameTitle}</title>
                    <style>
                        body { 
                            margin: 0; padding: 0; 
                            background: #1a0f0a; 
                            height: 100vh; 
                            display: flex; 
                            align-items: center; 
                            justify-content: center; 
                            font-family: 'Inter', sans-serif; 
                        }
                        .content {
                            text-align: center;
                            width: 90%;
                            max-width: 500px;
                        }
                        .title { 
                            color: #ffcc8a; 
                            font-size: 1.8rem; 
                            margin-bottom: 30px; 
                            font-weight: 600; 
                        }
                        .loading-bar-container { 
                            width: 100%; 
                            height: 4px; 
                            background: rgba(225, 139, 21, 0.8); 
                            border-radius: 2px; 
                            margin: 30px 0; 
                            overflow: hidden; 
                            position: relative;
                        }
                        .loading-bar {
                            position: absolute;
                            top: 0;
                            left: 0;
                            width: 30%;
                            height: 100%;
                            background: linear-gradient(90deg,
                                transparent,
                                rgba(225, 139, 21, 0.8),
                                rgba(255, 139, 21, 0.8),
                                transparent);
                            animation: slide 1.5s infinite ease-in-out;
                        }
                        @keyframes slide { 
                            0% { transform: translateX(-100%); }
                            100% { transform: translateX(400%); }
                        }
                    </style>
                </head>
                <body>
                    <div class="content">
                        <div class="title">LOADING ${gameTitle.toUpperCase()}</div>
                        <div id="status">Initializing...</div>
                        <div class="loading-bar-container"><div class="loading-bar"></div></div>
                        <div id="percentage">0%</div>
                        <div id="quote" style="margin-top: 40px; color: rgba(255,255,255,0.8); font-style: italic;">${initialQuote}</div>
                    </div>
                </body>
                </html>
            `;
        };
    </script>
</body>
</html>